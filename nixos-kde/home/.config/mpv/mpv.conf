# === ФАЙЛ КОНФИГУРАЦИИ MPV (Часто используемые настройки) ===
# Этот файл содержит примеры часто используемых опций mpv с переводом.
# Каждая строка представляет собой опцию командной строки без префикса '--'.
# Комментарии начинаются с символа '#'. Раскомментируйте нужные строки.

### Profile ###

include="~~/profiles.conf"


# === КАЧЕСТВО ВИДЕО ===
scale=ewa_lanczos4sharpest
cscale=ewa_lanczos4sharpest
scale-param1=0.5
scale-param2=0
dscale=mitchell
correct-downscaling=yes
linear-downscaling=yes
linear-upscaling=yes

# === ЦВЕТОВАЯ ТОЧНОСТЬ ===
video-output-levels=auto
hdr-compute-peak=yes
tone-mapping=mobius

# Точное управление цветом
target-colorspace-hint=yes


# === ИНТЕРПОЛЯЦИЯ ===
interpolation=yes
tscale=oversample

# === РАЗРЕШЕНИЕ ===
keepaspect=yes
keepaspect-window=yes

# === ОСНОВНЫЕ НАСТРОЙКИ ВОСПРОИЗВЕДЕНИЯ ===

# Сохранять позицию воспроизведения при выходе (для каждого файла)
save-position-on-quit=yes

ytdl=yes

#Перезагруза повисшего видео
vo=gpu-next
gpu-api=vulkan
demuxer-thread=yes
script-opts=ytdl_hook-ytdl_path="/etc/profiles/per-user/safe/bin/yt-dlp"

# Оптимизация для высокого разрешения
cache=yes
stream-buffer-size=8192KiB

# Для более плавного воспроизведения 4K
interpolation=yes

# Зацикливать текущий файл
# loop-file=inf


# Уровень громкости при запуске (0-100)
# volume=80

# Отключить звук при запуске
# mute=yes

# Пауза при минимизации окна
# pause-when-minimized=yes

# Пауза при потере фокуса окна
# pause-when-unfocused=no

# Автоматически воспроизводить следующий файл в каталоге
#ordered-playlist=yes

#Может помочь с более быстрой загрузкой информации о следующих элементах в плейлисте.
#prefetch-playlist=yes

# Автоматически загружать файлы (аудио, субтитры) из той же папки
# autoload-files=yes

# === ВИДЕО ===

# Включить аппаратное ускорение декодирования (если доступно)
#hwdec=auto

# Предпочтительный видеодрайвер (например, gpu, direct3d, xcb, wayland)
# vd-lavc-dr=yes # Также включить Direct Rendering для lavc

# Масштабировать видео до размера окна, сохраняя пропорции
# keepaspect=yes
# keepaspect-window=yes

# Масштаб видео (1.0 = 100%)
# video-zoom=0

# Сдвиг видео по горизонтали/вертикали
# video-pan-x=0
# video-pan-y=0

# Поворот видео (0, 90, 180, 270)
# video-rotate=0

# Выравнивание видео в окне (-1 - слева/сверху, 0 - по центру, 1 - справа/снизу)
# video-align-x=0
# video-align-y=0

# Обрезка видео (x:y:w:h)
# video-crop=

# === АУДИО ===

# Предпочтительный аудиодрайвер (например, pulse, alsa, wasapi, coreaudio)
# ao=

# Задержка аудио (в секундах, положительное значение - аудио позже видео)
# audio-delay=0

# Устройство воспроизведения звука
# audio-device=auto

# Нормализация при микшировании каналов (например, стерео из 5.1)
# audio-normalize-downmix=no

# Частота дискретизации аудио (0 = использовать исходную)
# audio-samplerate=0

# Формат аудио (например, s16, fltp, s32)
# audio-format=no

# Количество аудио каналов (например, stereo, 5.1, 7.1, auto-safe)
# audio-channels=auto-safe

# === СУБТИТРЫ ===

# Автоматическая загрузка субтитров (no, exact, fuzzy, all)
# sub-auto=exact

# Кодировка внешних субтитров
# sub-codepage=UTF-8

# Масштаб шрифта субтитров (1.0 - 100%)
# sub-scale=1.0

# Позиция субтитров (0-100, 100 - внизу)
# sub-pos=100

# Цвет шрифта субтитров (в формате 0xAARRGGBB)
# sub-color=#FFFFFFFF

# Цвет фона субтитров
# sub-back-color=#AF000000

# Цвет обводки субтитров
# sub-outline-color=#FF000000

# Размер обводки/тени
# sub-outline-size=1.65
# sub-shadow-offset=0

# Шрифт субтитров
# sub-font=sans-serif

# Размер шрифта субтитров
# sub-font-size=38

# Отступы субтитров от краев экрана
# sub-margin-x=19
# sub-margin-y=34

# Выравнивание текста субтитров (left, center, right)
# sub-align-x=center
# sub-align-y=bottom

# Включить/выключить отображение субтитров
# sub-visibility=yes

# === ИНТЕРФЕЙС И ОТОБРАЖЕНИЕ ===

# Запускать в полноэкранном режиме
fullscreen=yes

# Скрывать курсор мыши при воспроизведении (время в мс, always, no)
cursor-autohide=1000

# Уровень OSD (0=никогда, 1=только при взаимодействии, 2=также при изменениях, 3=статистика)
osd-level=1

# Время отображения OSD сообщений (в миллисекундах)
osd-duration=10000

# Позиция OSD (top, bottom)
# osd-align-y=bottom

# Цвет OSD сообщений
# osd-color=#FFFFFFFF

# Цвет фона OSD сообщений
# osd-back-color=#AF000000

# Размер шрифта OSD
# osd-font-size=12

# === УПРАВЛЕНИЕ ===

# Скорость воспроизведения (0.01 - 100)
# speed=1.0

# Высота звука (pitch) (0.01 - 100)
# pitch=1.0

# Направление воспроизведения (forward, backward)
# play-direction=forward

# === ЦВЕТ И КАЧЕСТВО ===

# Яркость (-100 - 100)
brightness=-2

# Контрастность (-100 - 100)
contrast=-10

# Насыщенность (-100 - 100)
saturation=50

# Гамма (-100 - 100)
# gamma=0

# Оттенок (-100 - 100)
# hue=0

# Фильтр дебanding (уменьшение цветовых полос)
# deband=no

# Алгоритм масштабирования видео (см. --list-options для полного списка)
# scale=lanczos
# cscale=
# dscale=hermite

# Использовать линейное масштабирование при уменьшении/увеличении
# linear-downscaling=yes
# linear-upscaling=no

# Интерполяция кадров (сглаживание движения)
# interpolation=no

# === ПРОЧЕЕ ===

# Скриншоты: формат (jpg, png, webp, jxl, avif)
# screenshot-format=jpg

# Каталог для сохранения скриншотов
# screenshot-dir=

# Шаблон имени файла скриншота
# screenshot-template=mpv-shot%n

# Качество JPEG скриншотов (0-100)
# screenshot-jpeg-quality=90

# === ПРОФИЛИ ===
# Эти профили можно активировать с помощью опции --profile=имя_профиля

# [profile:high-quality]
# vd-lavc-dr=yes
# vd-lavc-threads=0
# hwdec=auto
# scale=ewa_lanczossharp
# cscale=ewa_lanczossharp
# interpolation=yes
# tscale=oversample

# [profile:pseudo-gui]
# force-window=yes
# idle=yes




# === УСКОРЕНИЕ ПОИСКА (NAVIGATION/SEEKING) ===

# Использовать точное позиционирование (может быть медленнее, но точнее)
# hr-seek=yes
# Или всегда использовать точное позиционирование:
hr-seek=always

# Уменьшить время анализа файла (может повлиять на определение потока)
demuxer-lavf-analyzeduration=0.1

# Уменьшить размер буфера demuxer'а
demuxer-max-bytes=10MiB
demuxer-max-back-bytes=2MiB

# Уменьшить предварительную загрузку (быстрее реакция на перемотку)
demuxer-readahead-secs=0.5

# Уменьшить время ожидания при начальной буферизации
# Отрицательное значение может заставить начать воспроизведение немедленно
demuxer-lavf-probe-info=no

# Управление буферизацией при перемотке
hr-seek-demuxer-offset=0

# === ПРОЧЕЕ ===

# Пауза при минимизации окна (может сэкономить ресурсы)
# pause-when-minimized=yes

# Уровень OSD (меньше информации = потенциально быстрее)
# osd-level=1


# Отображать заголовок из метаданных в OSC, если доступен
osd-playlist-entry=title

# Настроить заголовок окна (пример)
title=MPV: ${?media-title:${media-title}}${!media-title:${filename}}

# Если нужно всегда отображать имя файла без пути вместо полного пути (если нет метаданных)
# osd-playlist-entry=filename

# Включить логирование в файл
log-file=~~/mpv.log
# Для максимальной детализации:
msg-level=all=v
# Или для конкретных компонентов:
msg-level=ffmpeg=debug
msg-level=demuxer=debug



deband=no
deband-iterations=1
deband-threshold=48
deband-range=16
deband-grain=32

temporal-dither
	
### Audio and Subtitles ###

slang=ru,rus,Russian
alang=ru,rus,Russian

sub-blur=0.5
sub-gauss=1.5
sub-scale=1.2
sub-margin-y=20
sub-color='#eceff4'
sub-shadow-offset=3
sub-outline-size=1.15
sub-font=Clear Sans Bold
sub-back-color='#2e3440'
sub-border-color='#2e3440'
sub-shadow-color='#000000'
sub-outline-color='#2e3440'

sub-auto=all
volume-max=200
sub-fix-timing=yes
blend-subtitles=yes
sub-ass-override=yes  
audio-file-auto=fuzzy 
audio-pitch-correction=yes
audio-normalize-downmix=yes    
audio-channels=7.1,5.1,stereo          
sub-file-paths-append=subtitles
demuxer-mkv-subtitle-preroll=yes
sub-file-paths=sub;subs;subtitles

## Audio Filters to Test ##

#af-toggle=@dynaudnorm:lavfi=[dynaudnorm=f=500:g=31:p=0.5:m=5:r=0.9]
#af-toggle=@dynaudnorm:!dynaudnorm=p=0.65:r=0.9

#af-toggle=@loudnorm:lavfi=[loudnorm=I=-16:TP=-1.5:LRA=11]
#af-toggle=@loudnorm:!loudnorm=I=-25:TP=-1.5:LRA=4:linear=false

#af "@dynaudnorm:lavfi=[dynaudnorm=f=500:g=31:p=0.5:m=5:r=0.9]" 
#af "@loudnorm:lavfi=[loudnorm=I=-16:TP=-1.5:LRA=11]"

# boost speech volume
#af=@normalize:speechnorm=e=10:r=0.0005:l=1
# loudnorm works well too, but uses more CPU
#af=@normalize:loudnorm=I=-10

#af-toggle=@loudnorm:lavfi=[loudnorm=I=-16:TP=-3:LRA=4]
#af-toggle=@dynaudnorm:lavfi=[dynaudnorm=g=5:f=250:r=0.9:p=0.5]

#af-toggle=@dynaudnorm:!dynaudnorm=f=500:g=17:r=0.1
#af-toggle=format:srate=48000

#af='lavfi=[dynaudnorm=f=200:g=5:r=0.1]'

#af-add='dynaudnorm=g=5:f=250:r=0.9:p=0.5'

### Functions ###

osc=no
fs=yes
snap-window
keep-open=yes
save-position-on-quit=yes
watch-later-dir="~~/cache/watch_later"
gpu-shader-cache-dir="~~/cache/shaders_cache"    
# Установить один шейдер по умолчанию
glsl-shaders="~~/shaders/F8.glsl" 

### OSD ###

no-border
osd-bar=no
osd-bold=yes
osd-font-size=37
osd-font='JetBrains Mono'



